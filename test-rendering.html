<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Game Rendering</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: #1a1a1a;
    }
    canvas {
      display: block;
      background: #0a0e27;
    }
    .debug {
      position: fixed;
      top: 10px;
      left: 10px;
      color: white;
      font-family: monospace;
      background: rgba(0,0,0,0.5);
      padding: 10px;
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas"></canvas>
  <div class="debug">
    <div>FPS: <span id="fps">0</span></div>
    <div>Status: <span id="status">Initializing...</span></div>
    <div>Canvas: <span id="canvasSize">0x0</span></div>
  </div>

  <script>
    // Simple test game to verify rendering
    class TestGame {
      constructor() {
        this.canvas = document.getElementById('gameCanvas');
        this.ctx = this.canvas.getContext('2d');
        
        if (!this.ctx) {
          document.getElementById('status').textContent = 'ERROR: No canvas context';
          console.error('Failed to get canvas context');
          return;
        }
        
        this.running = false;
        this.fps = 0;
        this.frameCount = 0;
        this.lastTime = 0;
        this.fpsTime = 0;
        
        // Test objects
        this.square = {
          x: 100,
          y: 100,
          size: 50,
          vx: 2,
          vy: 2,
          color: '#ff6b35'
        };
        
        this.init();
      }
      
      init() {
        this.resizeCanvas();
        window.addEventListener('resize', () => this.resizeCanvas());
        
        document.getElementById('status').textContent = 'Initialized';
        this.start();
      }
      
      resizeCanvas() {
        this.canvas.width = window.innerWidth;
        this.canvas.height = window.innerHeight;
        document.getElementById('canvasSize').textContent = 
          `${this.canvas.width}x${this.canvas.height}`;
      }
      
      start() {
        this.running = true;
        document.getElementById('status').textContent = 'Running';
        this.animate();
      }
      
      update() {
        // Move the square
        this.square.x += this.square.vx;
        this.square.y += this.square.vy;
        
        // Bounce off walls
        if (this.square.x <= 0 || this.square.x + this.square.size >= this.canvas.width) {
          this.square.vx = -this.square.vx;
        }
        if (this.square.y <= 0 || this.square.y + this.square.size >= this.canvas.height) {
          this.square.vy = -this.square.vy;
        }
      }
      
      render() {
        // Clear canvas
        this.ctx.fillStyle = '#0a0e27';
        this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
        
        // Draw grid
        this.ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
        this.ctx.lineWidth = 1;
        const gridSize = 50;
        
        for (let x = 0; x < this.canvas.width; x += gridSize) {
          this.ctx.beginPath();
          this.ctx.moveTo(x, 0);
          this.ctx.lineTo(x, this.canvas.height);
          this.ctx.stroke();
        }
        
        for (let y = 0; y < this.canvas.height; y += gridSize) {
          this.ctx.beginPath();
          this.ctx.moveTo(0, y);
          this.ctx.lineTo(this.canvas.width, y);
          this.ctx.stroke();
        }
        
        // Draw square
        this.ctx.fillStyle = this.square.color;
        this.ctx.fillRect(this.square.x, this.square.y, this.square.size, this.square.size);
        
        // Draw FPS text on canvas
        this.ctx.fillStyle = 'white';
        this.ctx.font = '20px monospace';
        this.ctx.fillText(`FPS: ${this.fps}`, 10, 30);
      }
      
      animate(currentTime = 0) {
        if (!this.running) return;
        
        // Calculate FPS
        this.frameCount++;
        if (currentTime - this.fpsTime > 1000) {
          this.fps = this.frameCount;
          this.frameCount = 0;
          this.fpsTime = currentTime;
          document.getElementById('fps').textContent = this.fps;
        }
        
        // Update and render
        this.update();
        this.render();
        
        // Continue loop
        requestAnimationFrame((time) => this.animate(time));
      }
    }
    
    // Start test game
    document.addEventListener('DOMContentLoaded', () => {
      const game = new TestGame();
      console.log('Test game started');
    });
  </script>
</body>
</html>