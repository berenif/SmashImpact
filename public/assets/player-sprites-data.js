// Player sprite data - Base64 encoded PNG
// This represents a character with brown hair, red/burgundy shirt, and brown pants
// Based on the provided pixel art sprite sheet

export const playerSpriteData = {
    // Base64 encoded 32x32 sprite sheet (simplified for now)
    // In production, this would be loaded from an actual PNG file
    base64: `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAABACAYAAAC+z+XVAAAAAXNSR0IArs4c6QAABkZJREFUeF7t3E1oXFUUB/D/m5lkJpPJTJKmTdM0bWqtVqtFRVFBEFxYFy5cuHDhwoULFy5cuHDhwoULFy5cuHDhwoULFy5cuHDhwoULFy5cuHDhwoULFy5cuHDhwoULFy5cuHDhwoULFy5cuHDhwoULFy5cuHDhwoULFy5cuHDhwoULFy5cuHDhwoULFy5cuHDhwoULFy5cuHDhwoULFy5cuHDhwoULFy5cuHDhwoULFy5cuHDhwoULF`,
    
    // Actual pixel data for generating sprites programmatically
    pixelFrames: {
        // Each frame is 32x32 pixels
        // Using a simplified format where each character represents a color
        // . = transparent, H = hair (brown), S = skin, R = red shirt, B = brown pants, D = dark outline
        idle_down: [
            // Frame 0 - Idle facing down
            `
            ............HHHHHH..............
            ...........HHHHHHHH.............
            ..........HHHHHHHHHH............
            ..........HHHHHHHHHHH...........
            .........HHHSSSSSSSHHH..........
            .........HHSSSSSSSSSHH..........
            .........HSSSDDSSDDSHH..........
            .........HSSSSSSSSSSHH..........
            .........HSSSDDDDSSHH...........
            ..........HSSSSSSSSH............
            ..........DRRRRRRRRRD...........
            .........DRRRRRRRRRRD...........
            ........DRRRRRRRRRRRRRD.........
            .......DRRRRRRRRRRRRRRD.........
            .......RRDRRRRRRRRRDRRR.........
            .......RRDRRRRRRRRRDRRR.........
            ........DRRRRRRRRRRRD...........
            ........DRRRRRRRRRRRD...........
            ........DBBBBBBBBBBBBD..........
            ........DBBBBBBBBBBBBD..........
            ........DBBBBDDBBBBBD...........
            ........DBBBBDDBBBBBD...........
            .........BBBD..DBBBB............
            .........BBBD..DBBBB............
            .........DDDD..DDDDD............
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `
        ],
        idle_left: [
            // Frame 0 - Idle facing left (mirrored)
            `
            ..............HHHHHH............
            .............HHHHHHHH...........
            ............HHHHHHHHHH..........
            ...........HHHHHHHHHHH..........
            ..........HHHSSSSSSSHHH.........
            ..........HHSSSSSSSSSHH.........
            ..........HHSDDSSSSSHH..........
            ..........HHSSSSSSSSHH..........
            ...........HHSSDDDSHH...........
            ............HSSSSSSH............
            ...........DRRRRRRRD............
            ...........DRRRRRRRRD...........
            .........DRRRRRRRRRRD...........
            .........DRRRRRRRRRRD...........
            .........RRRDRRRRRRD............
            .........RRRDRRRRRRD............
            ...........DRRRRRRRD............
            ...........DRRRRRRRD............
            ..........DBBBBBBBBBD...........
            ..........DBBBBBBBBBD...........
            ...........DBBBBDBBBD...........
            ...........DBBBBDBBBD...........
            ............BBBBDDBB............
            ............BBBBDDBB............
            ............DDDDDDD.............
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `
        ],
        walk_down: [
            // Walking animation frames
            // Frame 0
            `
            ............HHHHHH..............
            ...........HHHHHHHH.............
            ..........HHHHHHHHHH............
            ..........HHHHHHHHHHH...........
            .........HHHSSSSSSSHHH..........
            .........HHSSSSSSSSSHH..........
            .........HSSSDDSSDDSHH..........
            .........HSSSSSSSSSSHH..........
            .........HSSSDDDDSSHH...........
            ..........HSSSSSSSSH............
            ..........DRRRRRRRRRD...........
            .........DRRRRRRRRRRD...........
            ........DRRRRRRRRRRRRRD.........
            .......DRRRRRRRRRRRRRRD.........
            .......RRDRRRRRRRRRDRRR.........
            .......RRDRRRRRRRRRDRRR.........
            ........DRRRRRRRRRRRD...........
            ........DRRRRRRRRRRRD...........
            ........DBBBBBBBBBBBBD..........
            ........DBBBBBBBBBBBBD..........
            .......DBBBBDDBBBBBBBD..........
            ......DBBBBDD..DBBBBBD..........
            ......BBBBBD....DBBBB...........
            .....DBBBBBD....DBBBB...........
            .....DDDDDD.....DDDDD...........
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `,
            // Frame 1
            `
            ............HHHHHH..............
            ...........HHHHHHHH.............
            ..........HHHHHHHHHH............
            ..........HHHHHHHHHHH...........
            .........HHHSSSSSSSHHH..........
            .........HHSSSSSSSSSHH..........
            .........HSSSDDSSDDSHH..........
            .........HSSSSSSSSSSHH..........
            .........HSSSDDDDSSHH...........
            ..........HSSSSSSSSH............
            ..........DRRRRRRRRRD...........
            .........DRRRRRRRRRRD...........
            ........DRRRRRRRRRRRRRD.........
            .......DRRRRRRRRRRRRRRD.........
            .......RRDRRRRRRRRRDRRR.........
            .......RRDRRRRRRRRRDRRR.........
            ........DRRRRRRRRRRRD...........
            ........DRRRRRRRRRRRD...........
            ........DBBBBBBBBBBBBD..........
            ........DBBBBBBBBBBBBD..........
            ........DBBBBDDBBBBBD...........
            ........DBBBBDDBBBBBD...........
            .........BBBD..DBBBB............
            .........BBBD..DBBBB............
            .........DDDD..DDDDD............
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `
        ],
        attack_down: [
            // Attack animation frame
            `
            ............HHHHHH..............
            ...........HHHHHHHH.............
            ..........HHHHHHHHHH............
            ..........HHHHHHHHHHH...........
            .........HHHSSSSSSSHHH..........
            .........HHSSSSSSSSSHH..........
            .........HSSSDDSSDDSHH..........
            .........HSSSSSSSSSSHH..........
            .........HSSSDDDDSSHH...........
            ..........HSSSSSSSSH............
            ..........DRRRRRRRRRD...........
            .........DRRRRRRRRRRD...........
            ........DRRRRRRRRRRRRRD.........
            .....RRRRRRRRRRRRRRRRRRRR.......
            .....RRRDRRRRRRRRRRRDRRRR.......
            .....RRRDRRRRRRRRRRRDRRRR.......
            ........DRRRRRRRRRRRD...........
            ........DRRRRRRRRRRRD...........
            ........DBBBBBBBBBBBBD..........
            ........DBBBBBBBBBBBBD..........
            ........DBBBBDDBBBBBD...........
            .......DBBBBDD.DBBBBBD..........
            ......DBBBBBD...DBBBBBD.........
            ......BBBBBD.....DBBBB..........
            ......DDDDD......DDDDD..........
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `
        ]
    },
    
    // Color palette
    colorPalette: {
        '.': 'transparent',
        'H': '#8B4513',  // Brown hair
        'S': '#FFD4A3',  // Skin tone
        'R': '#B22222',  // Red/burgundy shirt
        'B': '#654321',  // Brown pants
        'D': '#2C1810',  // Dark outline/shadows
        'E': '#4B4B4B',  // Gray (scarf/belt details)
    },
    
    // Animation configurations
    animations: {
        idle: {
            frames: 4,
            duration: 200,
            loop: true
        },
        walk: {
            frames: 4,
            duration: 100,
            loop: true
        },
        run: {
            frames: 4,
            duration: 75,
            loop: true
        },
        attack: {
            frames: 3,
            duration: 100,
            loop: false
        },
        block: {
            frames: 1,
            duration: 100,
            loop: false
        },
        hurt: {
            frames: 2,
            duration: 150,
            loop: false
        }
    }
};

// Function to convert pixel data to canvas-drawable format
export function parsePixelData(pixelString, palette) {
    const lines = pixelString.trim().split('\n').map(line => line.trim());
    const pixels = [];
    
    for (let y = 0; y < lines.length; y++) {
        const row = [];
        for (let x = 0; x < lines[y].length; x++) {
            const char = lines[y][x];
            const color = palette[char] || 'transparent';
            row.push(color);
        }
        pixels.push(row);
    }
    
    return pixels;
}

// Function to generate sprite sheet canvas
export function generateSpriteSheet() {
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');
    
    const frameSize = 32;
    const columns = 8;
    const rows = 8;
    
    canvas.width = frameSize * columns;
    canvas.height = frameSize * rows;
    
    // Clear with transparency
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // Draw each frame
    let frameIndex = 0;
    const animations = ['idle_down', 'idle_left', 'walk_down', 'attack_down'];
    
    animations.forEach((animName, animIndex) => {
        const frames = playerSpriteData.pixelFrames[animName];
        if (frames) {
            frames.forEach((frameData, i) => {
                const x = (frameIndex % columns) * frameSize;
                const y = Math.floor(frameIndex / columns) * frameSize;
                
                const pixels = parsePixelData(frameData, playerSpriteData.colorPalette);
                
                // Draw pixels
                pixels.forEach((row, py) => {
                    row.forEach((color, px) => {
                        if (color !== 'transparent') {
                            ctx.fillStyle = color;
                            ctx.fillRect(x + px, y + py, 1, 1);
                        }
                    });
                });
                
                frameIndex++;
            });
        }
    });
    
    return canvas;
}