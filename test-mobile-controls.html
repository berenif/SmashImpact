<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Mobile Controls Test</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: #fff;
        }
        
        .test-info {
            background: rgba(0, 0, 0, 0.5);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .status {
            padding: 10px;
            margin: 10px 0;
            background: #333;
            border-radius: 5px;
        }
        
        .status.success {
            background: #2e7d32;
        }
        
        .status.error {
            background: #c62828;
        }
        
        .status.warning {
            background: #f57c00;
        }
        
        iframe {
            width: 100%;
            height: 600px;
            border: 2px solid #444;
            border-radius: 10px;
        }
        
        .controls-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }
        
        .control-item {
            background: #2a2a2a;
            padding: 10px;
            border-radius: 5px;
            border-left: 3px solid #4CAF50;
        }
    </style>
</head>
<body>
    <div class="test-info">
        <h1>Mobile Controls Test Page</h1>
        <p>This page tests the enhanced mobile controls with WASM integration.</p>
        
        <div id="status" class="status">Checking mobile detection...</div>
        
        <div class="controls-list">
            <div class="control-item">
                <strong>Virtual Joystick</strong>
                <ul>
                    <li>✓ Analog movement input</li>
                    <li>✓ Dead zone: 15%</li>
                    <li>✓ Visual feedback</li>
                    <li>✓ Direct WASM integration</li>
                </ul>
            </div>
            <div class="control-item">
                <strong>Attack Button</strong>
                <ul>
                    <li>✓ Primary action (red)</li>
                    <li>✓ Largest button</li>
                    <li>✓ Calls playerAttack()</li>
                </ul>
            </div>
            <div class="control-item">
                <strong>Block Button</strong>
                <ul>
                    <li>✓ Defensive action (blue)</li>
                    <li>✓ Hold to maintain</li>
                    <li>✓ Calls startBlock/endBlock</li>
                </ul>
            </div>
            <div class="control-item">
                <strong>Roll Button</strong>
                <ul>
                    <li>✓ Evasive action (orange)</li>
                    <li>✓ Uses joystick direction</li>
                    <li>✓ Calls playerRoll()</li>
                </ul>
            </div>
            <div class="control-item">
                <strong>Special Button</strong>
                <ul>
                    <li>✓ Ultimate ability (purple)</li>
                    <li>✓ Area effect</li>
                    <li>✓ Calls playerSpecialAbility()</li>
                </ul>
            </div>
        </div>
    </div>
    
    <div class="test-info">
        <h2>Game Preview</h2>
        <p>Open game.html on a mobile device or use Chrome DevTools mobile emulation to test the controls.</p>
        <iframe src="game.html" id="gameFrame"></iframe>
    </div>
    
    <script>
        // Check if mobile
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||
                        ('ontouchstart' in window) ||
                        (navigator.maxTouchPoints > 0);
        
        const statusEl = document.getElementById('status');
        
        if (isMobile) {
            statusEl.textContent = '✓ Mobile device detected - Controls should be visible';
            statusEl.className = 'status success';
        } else {
            statusEl.textContent = '⚠ Desktop detected - Use mobile emulation in DevTools (F12 > Toggle device toolbar)';
            statusEl.className = 'status warning';
        }
        
        // Log test results
        console.log('Mobile Controls Test Results:');
        console.log('- Mobile Detection:', isMobile);
        console.log('- Touch Support:', 'ontouchstart' in window);
        console.log('- Max Touch Points:', navigator.maxTouchPoints);
        console.log('- User Agent:', navigator.userAgent);
    </script>
</body>
</html>